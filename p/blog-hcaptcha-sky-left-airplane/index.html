<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>"Please click each image containing an airplane in the sky flying left" | 小冰爱吃盐</title>
<meta name=keywords content="hCaptcha,,hCaptcha,Solver"><meta name=description content="关于 Please click each image containing an airplane in the sky flying left 的 hCaptcha 解决方案"><meta name=author content="北屿"><link rel=canonical href=https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/><meta name=google-site-verification content="G-PRK0FMMDH1"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.8d0a354998e71ab0f222ae59ef33b3acb610ae9b11671c8d8c5ab4a9bfbe09b7.css integrity="sha256-jQo1SZjnGrDyIq5Z7zOzrLYQrpsRZxyNjFq0qb++Cbc=" rel="preload stylesheet" as=style><link rel=preload href=/favicon.jpg as=image><link rel=icon href=https://blog.bj-yan.top/favicon.jpg><link rel=icon type=image/png sizes=16x16 href=https://blog.bj-yan.top/favicon.jpg><link rel=icon type=image/png sizes=32x32 href=https://blog.bj-yan.top/favicon.jpg><link rel=apple-touch-icon href=https://blog.bj-yan.top/favicon.jpg><link rel=mask-icon href=https://blog.bj-yan.top/favicon.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.136.5"><link rel=alternate hreflang=zh-cn href=https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?d396c00ca4fe6547a19249d34cb91254",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script type=text/javascript async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><link href=//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><script async src="https://www.googletagmanager.com/gtag/js?id=G-DC28LRQ4E5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DC28LRQ4E5")}</script><meta property="og:title" content='"Please click each image containing an airplane in the sky flying left"'><meta property="og:description" content="关于 Please click each image containing an airplane in the sky flying left 的 hCaptcha 解决方案"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/"><meta property="og:image" content="https://blog.bj-yan.top/favicon.jpg"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-03T23:34:48+08:00"><meta property="article:modified_time" content="2023-03-21T12:52:17+08:00"><meta property="og:site_name" content="小冰爱吃盐"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.bj-yan.top/favicon.jpg"><meta name=twitter:title content='"Please click each image containing an airplane in the sky flying left"'><meta name=twitter:description content="关于 Please click each image containing an airplane in the sky flying left 的 hCaptcha 解决方案"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.bj-yan.top/post/"},{"@type":"ListItem","position":2,"name":"\"Please click each image containing an airplane in the sky flying left\"","item":"https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"\"Please click each image containing an airplane in the sky flying left\"","name":"\u0022Please click each image containing an airplane in the sky flying left\u0022","description":"关于 Please click each image containing an airplane in the sky flying left 的 hCaptcha 解决方案","keywords":["hCaptcha,","hCaptcha","Solver"],"articleBody":" My machine is a living life. I’ll prove it.\n引言 hCaptcha 在今天又喜提一次更新，出现了新的标签，要求选中 在天上 的 向左飞 的 飞机。\n不过幸运的是，所有的样例图片里面，都包含一个飞机，所以这个标签相当于少了一个限制，只有 在天上 和 向左飞 这两个限制了。\n正文方法 首先，还是先来观察图片，依然是从收集的 数据集 来看。除了上面说到的，每个样例图片中比如会有一个飞机以外，如果飞机是在天空中，那么他的背景一定很“干净”，如果不在天空，基本可以判断在地面，在地面的图片中，也会有多个区域组成，例如草坪、机场跑道、背景森林、背景天空之类的。\n那么区分第一个问题的关键就是背景的复杂度。咋做呢？\n最开始的想法就是继承之前的思路，色块过滤，但是划分好色块以后，很难去区分是否是飞机色块还是背景色块，遂被 pass 掉。\n然后，看了一下大部分去除天空背景的方法基本都是基于 HSV 颜色空间的阈值过滤，最后再加上腐蚀和膨胀的计算图形学操作来降噪，我自己测了几下，但是天空的颜色范围略大，有蓝、有白、有黄，而最关键的，其实和飞机颜色非常像，因为飞机也基本都是淡蓝或者白的浅色系。也被 pass。\n又想到，飞机底部的阴影会有黑色，那么根据黑色来画一个超像素的智能选区也是可以的，但是我不会怎么实现（x，遂被 pass。\n最后采取的方案是使用轮廓线方法 Canny，来找到所有轮廓线，然后设置阈值，根据轮廓线的数量来判断是否是在天空中，如果在天空，其实轮廓线会很简单，而不在天空则会添加一大片杂乱无章的线。当然这个阈值是我随便试了几张图片得出来的，毕竟两者的差距过大了。经过这样处理的判断准确率接近 100%。\n好了，解决了一个问题，那么剩下的问题就是，怎么判断飞机朝向是在左？\n这可真是难到我了，不用 Deep Learning 来做这个确实有难度，但是还是有取巧的办法的。首先，大部分飞机都是运输机或者战斗机、客机一类的，很少有那种前面是螺旋桨的飞机，也没见过直升机。甚至还有下面这样的 WTF Airplane（这 tm 什么玩意儿？）\n既然这样，这类的飞机也是有特点的，就是“头轻脚重”。除了本身尾翼会比较重、头部会呈尖状较轻以外，还有就是机翼会向后，那么整个图片的“重心”应该是在偏向机尾的，我可以根据 4 个点，极左、极右、中点、重心来判断飞机朝向。\n听起来很科学对不对，然而实际效果却不是很好，最重要的就是飞机存在透视关系导致从前面看去，可能重心就在前面了。比如机头朝你，大范围的线都画到了机头的上面，尾部的线很少，这样整个图片的重心就在前面了。后面想能不能把图片填充上，然后得到的轮廓线大多都不是闭合的，所以很难填充出整个飞机（如果能，那岂不是图像分割就简单了）。\n后面我突发奇想，另辟蹊径，还是从上面画出来的轮廓线看出来的，机头因为没有复杂的东西，画出来的轮廓线会比较“简单”，而机尾由于存在“尾翼”之类的元件，画出来会比较“复杂”。那么如何衡量这个“简单”和“复杂”呢？求和就完了…没错，我最后就是把左边在 x_min 到 x_min + left_threshold 的非零像素数出来（就是轮廓线的像素点）和 x_max - left_threshold 到 x_max 的像素点数出来进行比较，谁大那么谁就是机尾，右边大的话，那就是机头在左。没想到最后结果还不错，基本 1-2 轮就能通过验证。\n附一下测试版本的完整 Code\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 from itertools import count import cv2 import numpy as np import matplotlib.pyplot as plt from scipy import ndimage as ndi from skimage.util import random_noise from skimage import feature class SkyLeftAirplaneChallenger: \"\"\"A fast solution for identifying vertical rivers\"\"\" def __init__(self): self.flag = \"skyleftairplane_model\" self.sky_threshold = 1800 self.left_threshold = 30 self.debug = True @staticmethod def _remove_border(img): img[:, 1] = 0 img[:, -2] = 0 img[1, :] = 0 img[-2, :] = 0 return img def solution(self, img_stream, **kwargs) -\u003e bool: # noqa \"\"\"Implementation process of solution\"\"\" img_arr = np.frombuffer(img_stream, np.uint8) img = cv2.imdecode(img_arr, flags=1) img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) # cv2.imshow(\"img\", img) # cv2.waitKey(0) edges1 = feature.canny(img) edges1 = self._remove_border(edges1) edges2 = feature.canny(img, sigma=3) edges2 = self._remove_border(edges2) # display results # fig, ax = plt.subplots(nrows=1, ncols=3, figsize=(8, 3)) # ax[0].imshow(img, cmap='gray') # ax[0].set_title('noisy image', fontsize=20) # ax[1].imshow(edges1, cmap='gray') # ax[1].set_title(r'Canny filter, $\\sigma=1$', fontsize=20) # ax[2].imshow(edges2, cmap='gray') # ax[2].set_title(r'Canny filter, $\\sigma=3$', fontsize=20) # for a in ax: # a.axis('off') # fig.tight_layout() # plt.show() # fill_plane = ndi.binary_fill_holes(edges1) # fig, ax = plt.subplots(figsize=(4, 3)) # ax.imshow(fill_plane, cmap=plt.cm.gray) # ax.set_title('filling the holes') # ax.axis('off') # plt.show() # print(np.count_nonzero(edges1)) # print(np.count_nonzero(edges2)) if np.count_nonzero(edges1) \u003e self.sky_threshold: if self.debug: print('[not in sky] ', end='') return False # get avg coordinate of edges where edges are not zero # avg_point = np.average(np.nonzero(edges1), axis=1) # print(avg_point) min_x = np.min(np.nonzero(edges1), axis=1)[1] max_x = np.max(np.nonzero(edges1), axis=1)[1] left_nonzero = np.count_nonzero(edges1[:, min_x:min(max_x, min_x + self.left_threshold)]) right_nonzero = np.count_nonzero(edges1[:, max(min_x, max_x - self.left_threshold):max_x]) # print(left_nonzero, right_nonzero) if left_nonzero \u003e right_nonzero: if self.debug: print('[not turn left] ', end='') return False # mid_x = (min_x + max_x) / 2 # print(min_x, max_x, mid_x, avg_point[0] \u003c mid_x) # if avg_point[0] \u003e= mid_x: # return False # plt.show() return True if __name__ == '__main__': import os import sys sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__)))) result_path = 'result.txt' if os.path.exists(result_path): os.remove(result_path) # result_file = open(result_path, 'w') result_file = sys.stdout base_path = os.path.join('..', 'database', 'airplane_in_the_sky_flying_left') image_list = os.listdir(base_path) # image_list.sort() for image_name in image_list: image_path = os.path.join(base_path, image_name) with open(image_path, \"rb\") as file: data = file.read() solution = SkyLeftAirplaneChallenger().solution(data) result_file.write(f'{image_name}: {solution}\\n') result_file.flush() result_file.close() 结语 说实话每天做一道 hCaptcha 出的高质量图片处理题还是感觉很爽的 hhhh。\n不过通过网友分享，已经看到了更多生成模型来做的问题了，毕竟人家带薪搞这东西，后面有些题已经不是只通过图像处理就能解决的了，比如在某油猴插件反馈中出现的黑白条纹的猫之类的。\n见招拆招的取巧方法罢了。\n","wordCount":"1878","inLanguage":"zh-cn","datePublished":"2022-03-03T23:34:48+08:00","dateModified":"2023-03-21T12:52:17+08:00","author":{"@type":"Person","name":"北屿"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/"},"publisher":{"@type":"Organization","name":"小冰爱吃盐","logo":{"@type":"ImageObject","url":"https://blog.bj-yan.top/favicon.jpg"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.bj-yan.top/ accesskey=h title="Home (Alt + H)"><img src=/favicon.jpg alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><ul class=lang-switch><li>|</li></ul></span></div><ul id=menu><li><a href=https://blog.bj-yan.top/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.bj-yan.top/post/ title=Posts><span>Posts</span></a></li><li><a href=https://blog.bj-yan.top/archives title=Archive><span>Archive</span></a></li><li><a href=https://blog.bj-yan.top/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.bj-yan.top/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.bj-yan.top/about/ title=About><span>About</span></a></li><li><a href=https://blog.bj-yan.top/friends/ title=Friends><span>Friends</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.bj-yan.top/>Home</a>&nbsp;»&nbsp;<a href=https://blog.bj-yan.top/post/>Posts</a></div><h1 class=post-title>"Please click each image containing an airplane in the sky flying left"</h1><div class=post-meta>March 3, 2022 · Edited March 21, 2023 · 1878 words · 4 min · 北屿&nbsp;|&nbsp;<a href=https://github.com/beiyuouo/blog-source/tree/main/content/post/blog-hcaptcha-sky-left-airplane.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%bc%95%e8%a8%80 aria-label=引言>引言</a></li><li><a href=#%e6%ad%a3%e6%96%87%e6%96%b9%e6%b3%95 aria-label=正文方法>正文方法</a></li><li><a href=#%e7%bb%93%e8%af%ad aria-label=结语>结语</a></li></ul></div></details></div><div class=post-content><blockquote><p>My machine is a living life. I&rsquo;ll prove it.</p></blockquote><h2 id=引言>引言<a hidden class=anchor aria-hidden=true href=#引言>#</a></h2><figure><img loading=lazy src=/img/hcaptcha-sky-left-airplane/example.jpg#center></figure><p><a href=https://www.hcaptcha.com/>hCaptcha</a> 在今天又喜提一次更新，出现了新的标签，要求选中 <strong>在天上</strong> 的 <strong>向左飞</strong> 的 <strong>飞机</strong>。</p><p>不过幸运的是，所有的样例图片里面，都包含一个飞机，所以这个标签相当于少了一个限制，只有 <strong>在天上</strong> 和 <strong>向左飞</strong> 这两个限制了。</p><h2 id=正文方法>正文方法<a hidden class=anchor aria-hidden=true href=#正文方法>#</a></h2><p>首先，还是先来观察图片，依然是从收集的 <a href=https://github.com/QIN2DIM/img_pool/releases/tag/airplane_in_the_sky_flying_left>数据集</a> 来看。除了上面说到的，每个样例图片中比如会有一个飞机以外，如果飞机是在天空中，那么他的背景一定很“干净”，如果不在天空，基本可以判断在地面，在地面的图片中，也会有多个区域组成，例如草坪、机场跑道、背景森林、背景天空之类的。</p><p>那么区分第一个问题的关键就是背景的复杂度。咋做呢？</p><p>最开始的想法就是继承之前的思路，色块过滤，但是划分好色块以后，很难去区分是否是飞机色块还是背景色块，遂被 pass 掉。</p><p>然后，看了一下大部分去除天空背景的方法基本都是基于 HSV 颜色空间的阈值过滤，最后再加上腐蚀和膨胀的计算图形学操作来降噪，我自己测了几下，但是天空的颜色范围略大，有蓝、有白、有黄，而最关键的，其实和飞机颜色非常像，因为飞机也基本都是淡蓝或者白的浅色系。也被 pass。</p><p>又想到，飞机底部的阴影会有黑色，那么根据黑色来画一个超像素的智能选区也是可以的，但是我不会怎么实现（x，遂被 pass。</p><p>最后采取的方案是使用轮廓线方法 <code>Canny</code>，来找到所有轮廓线，然后设置阈值，根据轮廓线的数量来判断是否是在天空中，如果在天空，其实轮廓线会很简单，而不在天空则会添加一大片杂乱无章的线。当然这个阈值是我随便试了几张图片得出来的，毕竟两者的差距过大了。经过这样处理的判断准确率接近 100%。</p><p>好了，解决了一个问题，那么剩下的问题就是，怎么判断飞机朝向是在左？</p><p>这可真是难到我了，不用 Deep Learning 来做这个确实有难度，但是还是有取巧的办法的。首先，大部分飞机都是运输机或者战斗机、客机一类的，很少有那种前面是螺旋桨的飞机，也没见过直升机。甚至还有下面这样的 WTF Airplane（这 tm 什么玩意儿？）</p><figure><img loading=lazy src=/img/hcaptcha-sky-left-airplane/wtf-airplane.png#center></figure><p>既然这样，这类的飞机也是有特点的，就是“头轻脚重”。除了本身尾翼会比较重、头部会呈尖状较轻以外，还有就是机翼会向后，那么整个图片的“重心”应该是在偏向机尾的，我可以根据 4 个点，极左、极右、中点、重心来判断飞机朝向。</p><p>听起来很科学对不对，然而实际效果却不是很好，最重要的就是飞机存在透视关系导致从前面看去，可能重心就在前面了。比如机头朝你，大范围的线都画到了机头的上面，尾部的线很少，这样整个图片的重心就在前面了。后面想能不能把图片填充上，然后得到的轮廓线大多都不是闭合的，所以很难填充出整个飞机（如果能，那岂不是图像分割就简单了）。</p><p>后面我突发奇想，另辟蹊径，还是从上面画出来的轮廓线看出来的，机头因为没有复杂的东西，画出来的轮廓线会比较“简单”，而机尾由于存在“尾翼”之类的元件，画出来会比较“复杂”。那么如何衡量这个“简单”和“复杂”呢？求和就完了&mldr;没错，我最后就是把左边在 <code>x_min</code> 到 <code>x_min + left_threshold</code> 的非零像素数出来（就是轮廓线的像素点）和 <code>x_max - left_threshold</code> 到 <code>x_max</code> 的像素点数出来进行比较，谁大那么谁就是机尾，右边大的话，那就是机头在左。没想到最后结果还不错，基本 1-2 轮就能通过验证。</p><figure><img loading=lazy src=/img/hcaptcha-sky-left-airplane/demo.gif#center></figure><p>附一下测试版本的完整 Code</p><div class=highlight><div style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#686868">124
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6ab825;font-weight:700>from</span> <span style=color:#447fcf;text-decoration:underline>itertools</span> <span style=color:#6ab825;font-weight:700>import</span> count
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>cv2</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>numpy</span> <span style=color:#6ab825;font-weight:700>as</span> <span style=color:#447fcf;text-decoration:underline>np</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>matplotlib.pyplot</span> <span style=color:#6ab825;font-weight:700>as</span> <span style=color:#447fcf;text-decoration:underline>plt</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>from</span> <span style=color:#447fcf;text-decoration:underline>scipy</span> <span style=color:#6ab825;font-weight:700>import</span> ndimage <span style=color:#6ab825;font-weight:700>as</span> ndi
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>from</span> <span style=color:#447fcf;text-decoration:underline>skimage.util</span> <span style=color:#6ab825;font-weight:700>import</span> random_noise
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>from</span> <span style=color:#447fcf;text-decoration:underline>skimage</span> <span style=color:#6ab825;font-weight:700>import</span> feature
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>SkyLeftAirplaneChallenger</span>:
</span></span><span style=display:flex><span>    <span style=color:#ed9d13>&#34;&#34;&#34;A fast solution for identifying vertical rivers&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>def</span> __init__(self):
</span></span><span style=display:flex><span>        self.flag = <span style=color:#ed9d13>&#34;skyleftairplane_model&#34;</span>
</span></span><span style=display:flex><span>        self.sky_threshold = <span style=color:#3677a9>1800</span>
</span></span><span style=display:flex><span>        self.left_threshold = <span style=color:#3677a9>30</span>
</span></span><span style=display:flex><span>        self.debug = <span style=color:#6ab825;font-weight:700>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:orange>@staticmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>_remove_border</span>(img):
</span></span><span style=display:flex><span>        img[:, <span style=color:#3677a9>1</span>] = <span style=color:#3677a9>0</span>
</span></span><span style=display:flex><span>        img[:, -<span style=color:#3677a9>2</span>] = <span style=color:#3677a9>0</span>
</span></span><span style=display:flex><span>        img[<span style=color:#3677a9>1</span>, :] = <span style=color:#3677a9>0</span>
</span></span><span style=display:flex><span>        img[-<span style=color:#3677a9>2</span>, :] = <span style=color:#3677a9>0</span>
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>return</span> img
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>solution</span>(self, img_stream, **kwargs) -&gt; <span style=color:#24909d>bool</span>:  <span style=color:#999;font-style:italic># noqa</span>
</span></span><span style=display:flex><span>        <span style=color:#ed9d13>&#34;&#34;&#34;Implementation process of solution&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        img_arr = np.frombuffer(img_stream, np.uint8)
</span></span><span style=display:flex><span>        img = cv2.imdecode(img_arr, flags=<span style=color:#3677a9>1</span>)
</span></span><span style=display:flex><span>        img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># cv2.imshow(&#34;img&#34;, img)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># cv2.waitKey(0)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        edges1 = feature.canny(img)
</span></span><span style=display:flex><span>        edges1 = self._remove_border(edges1)
</span></span><span style=display:flex><span>        edges2 = feature.canny(img, sigma=<span style=color:#3677a9>3</span>)
</span></span><span style=display:flex><span>        edges2 = self._remove_border(edges2)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># display results</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># fig, ax = plt.subplots(nrows=1, ncols=3, figsize=(8, 3))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax[0].imshow(img, cmap=&#39;gray&#39;)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax[0].set_title(&#39;noisy image&#39;, fontsize=20)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax[1].imshow(edges1, cmap=&#39;gray&#39;)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax[1].set_title(r&#39;Canny filter, $\sigma=1$&#39;, fontsize=20)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax[2].imshow(edges2, cmap=&#39;gray&#39;)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax[2].set_title(r&#39;Canny filter, $\sigma=3$&#39;, fontsize=20)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># for a in ax:</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic>#     a.axis(&#39;off&#39;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># fig.tight_layout()</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># plt.show()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># fill_plane = ndi.binary_fill_holes(edges1)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># fig, ax = plt.subplots(figsize=(4, 3))</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax.imshow(fill_plane, cmap=plt.cm.gray)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax.set_title(&#39;filling the holes&#39;)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># ax.axis(&#39;off&#39;)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># plt.show()</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># print(np.count_nonzero(edges1))</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># print(np.count_nonzero(edges2))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>if</span> np.count_nonzero(edges1) &gt; self.sky_threshold:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>if</span> self.debug:
</span></span><span style=display:flex><span>                <span style=color:#24909d>print</span>(<span style=color:#ed9d13>&#39;[not in sky] &#39;</span>, end=<span style=color:#ed9d13>&#39;&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#6ab825;font-weight:700>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># get avg coordinate of edges where edges are not zero</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># avg_point = np.average(np.nonzero(edges1), axis=1)</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># print(avg_point)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        min_x = np.min(np.nonzero(edges1), axis=<span style=color:#3677a9>1</span>)[<span style=color:#3677a9>1</span>]
</span></span><span style=display:flex><span>        max_x = np.max(np.nonzero(edges1), axis=<span style=color:#3677a9>1</span>)[<span style=color:#3677a9>1</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        left_nonzero = np.count_nonzero(edges1[:, min_x:<span style=color:#24909d>min</span>(max_x, min_x + self.left_threshold)])
</span></span><span style=display:flex><span>        right_nonzero = np.count_nonzero(edges1[:, <span style=color:#24909d>max</span>(min_x, max_x - self.left_threshold):max_x])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># print(left_nonzero, right_nonzero)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>if</span> left_nonzero &gt; right_nonzero:
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>if</span> self.debug:
</span></span><span style=display:flex><span>                <span style=color:#24909d>print</span>(<span style=color:#ed9d13>&#39;[not turn left] &#39;</span>, end=<span style=color:#ed9d13>&#39;&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#6ab825;font-weight:700>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># mid_x = (min_x + max_x) / 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># print(min_x, max_x, mid_x, avg_point[0] &lt; mid_x)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># if avg_point[0] &gt;= mid_x:</span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic>#     return False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#999;font-style:italic># plt.show()</span>
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#6ab825;font-weight:700>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>if</span> __name__ == <span style=color:#ed9d13>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>os</span>
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>import</span> <span style=color:#447fcf;text-decoration:underline>sys</span>
</span></span><span style=display:flex><span>    sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    result_path = <span style=color:#ed9d13>&#39;result.txt&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>if</span> os.path.exists(result_path):
</span></span><span style=display:flex><span>        os.remove(result_path)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic># result_file = open(result_path, &#39;w&#39;)</span>
</span></span><span style=display:flex><span>    result_file = sys.stdout
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    base_path = os.path.join(<span style=color:#ed9d13>&#39;..&#39;</span>, <span style=color:#ed9d13>&#39;database&#39;</span>, <span style=color:#ed9d13>&#39;airplane_in_the_sky_flying_left&#39;</span>)
</span></span><span style=display:flex><span>    image_list = os.listdir(base_path)
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic># image_list.sort()</span>
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>for</span> image_name <span style=color:#6ab825;font-weight:700>in</span> image_list:
</span></span><span style=display:flex><span>        image_path = os.path.join(base_path, image_name)
</span></span><span style=display:flex><span>        <span style=color:#6ab825;font-weight:700>with</span> <span style=color:#24909d>open</span>(image_path, <span style=color:#ed9d13>&#34;rb&#34;</span>) <span style=color:#6ab825;font-weight:700>as</span> file:
</span></span><span style=display:flex><span>            data = file.read()
</span></span><span style=display:flex><span>        solution = SkyLeftAirplaneChallenger().solution(data)
</span></span><span style=display:flex><span>        result_file.write(<span style=color:#ed9d13>f</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>{</span>image_name<span style=color:#ed9d13>}</span><span style=color:#ed9d13>: </span><span style=color:#ed9d13>{</span>solution<span style=color:#ed9d13>}</span><span style=color:#ed9d13>\n</span><span style=color:#ed9d13>&#39;</span>)
</span></span><span style=display:flex><span>        result_file.flush()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    result_file.close()
</span></span></code></pre></td></tr></table></div></div><h2 id=结语>结语<a hidden class=anchor aria-hidden=true href=#结语>#</a></h2><p>说实话每天做一道 <a href=https://www.hcaptcha.com/>hCaptcha</a> 出的高质量图片处理题还是感觉很爽的 hhhh。</p><p>不过通过网友分享，已经看到了更多生成模型来做的问题了，毕竟人家带薪搞这东西，后面有些题已经不是只通过图像处理就能解决的了，比如在某油猴插件反馈中出现的黑白条纹的猫之类的。</p><p>见招拆招的取巧方法罢了。</p></div><footer class=post-footer><div class=post-copyright-div><ul class=post-copyright><div class=post-copyright-title><p>"Please click each image containing an airplane in the sky flying left"</p><p><a href=https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/>https://blog.bj-yan.top/p/blog-hcaptcha-sky-left-airplane/</a></p></div><div class="post-copy-meta level is-mobile"><div class=level-left><div class="level-item is-narrow"><div><h6>作者</h6><p>北屿</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>March 3, 2022</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>March 21, 2023</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class=icons rel=noopener target=_blank title="Creative Commons" href=https://creativecommons.org/><i class="icon fab fa-creative-commons"></i></a>
<a class=icons rel=noopener target=_blank title=Attribution href=https://creativecommons.org/licenses/by/4.0/><i class="icon fab fa-creative-commons-by"></i></a>
<a class=icons rel=noopener target=_blank title=Noncommercial href=https://creativecommons.org/licenses/by-nc/4.0/><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></ul></div><ul class=post-tags><li><a href=https://blog.bj-yan.top/tags/hcaptcha/>Hcaptcha</a></li><li><a href=https://blog.bj-yan.top/tags/gan/>GAN</a></li><li><a href=https://blog.bj-yan.top/tags/blog/>Blog</a></li><li><a href=https://blog.bj-yan.top/tags/captcha/>Captcha</a></li><li><a href=https://blog.bj-yan.top/tags/deep-learning/>Deep-Learning</a></li></ul><nav class=paginav><a class=prev href=https://blog.bj-yan.top/p/blog-codecraft-2022/><span class=title>«</span><br><span>baseIine 的无奈 - Codecraft 2022 参赛心路</span>
</a><a class=next href=https://blog.bj-yan.top/p/blog-hcaptcha-vertical-river/><span class=title>»</span><br><span>"Please click each image containing a vertical river"</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label='share "Please click each image containing an airplane in the sky flying left" on twitter' href="https://twitter.com/intent/tweet/?text=%22Please%20click%20each%20image%20containing%20an%20airplane%20in%20the%20sky%20flying%20left%22&amp;url=https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f&amp;hashtags=hcaptcha%2cGAN%2cblog%2ccaptcha%2cdeep-learning"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share "Please click each image containing an airplane in the sky flying left" on linkedin' href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f&amp;title=%22Please%20click%20each%20image%20containing%20an%20airplane%20in%20the%20sky%20flying%20left%22&amp;summary=%22Please%20click%20each%20image%20containing%20an%20airplane%20in%20the%20sky%20flying%20left%22&amp;source=https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share "Please click each image containing an airplane in the sky flying left" on reddit' href="https://reddit.com/submit?url=https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f&title=%22Please%20click%20each%20image%20containing%20an%20airplane%20in%20the%20sky%20flying%20left%22"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share "Please click each image containing an airplane in the sky flying left" on facebook' href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share "Please click each image containing an airplane in the sky flying left" on whatsapp' href="https://api.whatsapp.com/send?text=%22Please%20click%20each%20image%20containing%20an%20airplane%20in%20the%20sky%20flying%20left%22%20-%20https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share "Please click each image containing an airplane in the sky flying left" on telegram' href="https://telegram.me/share/url?text=%22Please%20click%20each%20image%20containing%20an%20airplane%20in%20the%20sky%20flying%20left%22&amp;url=https%3a%2f%2fblog.bj-yan.top%2fp%2fblog-hcaptcha-sky-left-airplane%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div class=reward-container><div>Have fun.</div><button onclick='var qr=document.getElementById("qr");qr.style.display=qr.style.display==="none"?"block":"none"'>Donate</button><div id=qr style=display:none><div style=display:inline-block><img src=/donate/alipay.png alt=alipay><p>alipay</p></div><div style=display:inline-block><img src=/donate/wechatpay.png alt=wechatpay><p>wechatpay</p></div></div></div><div class=comments><div id=comment-giscus></div></div><script>var gis,iframes,path="/p/blog-hcaptcha-sky-left-airplane/",path=path.substring(path.indexOf("/")+1),path=decodeURI(path);console.log(path),gis=document.createElement("script"),gis.type="text/javascript",gis.async=!0,gis.setAttribute("src","https://giscus.app/client.js"),gis.setAttribute("data-repo","beiyuouo/blog-comment"),gis.setAttribute("data-repo-id","R_kgDOGF_a6w"),gis.setAttribute("data-category","General"),gis.setAttribute("data-category-id","DIC_kwDOGF_a684B_YGN"),gis.setAttribute("data-mapping","pathname"),gis.setAttribute("data-strict",0),gis.setAttribute("data-reactions-enabled","1"),gis.setAttribute("data-emit-metadata","0"),gis.setAttribute("data-input-position","top"),gis.setAttribute("data-theme","transparent_dark"),gis.setAttribute("data-lang","en"),gis.setAttribute("data-loading","lazy"),gis.setAttribute("crossorigin","anonymous"),iframes=document.getElementsByTagName("iframe"),document.getElementById("comment-giscus").appendChild(gis)</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.bj-yan.top/>小冰爱吃盐</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span><br><span id=busuanzi_container_page_pv>本文总阅读量<span id=busuanzi_value_page_pv></span>次
</span><span id=busuanzi_container_site_pv>本站总访问量<span id=busuanzi_value_site_pv></span>次
</span><span id=busuanzi_container_site_uv>本站访客数<span id=busuanzi_value_site_uv></span>人次
</span><script type=text/javascript id=mapmyvisitors src="//mapmyvisitors.com/map.js?d=Y4m14m4Jh2bS4Vyr_FP_8YF3q3_awg-YnkQxkAdOtIw&cl=ffffff&w=200"></script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>